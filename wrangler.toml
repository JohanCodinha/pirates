name = "pirates-multiplayer"
main = "src/index.ts"
compatibility_date = "2024-12-26"
workers_dev = true

# Custom domain routes (need both to match with and without trailing slash)
routes = [
  { pattern = "games.joadn.com/pirates", zone_name = "joadn.com" },
  { pattern = "games.joadn.com/pirates/*", zone_name = "joadn.com" }
]

# Static assets
assets = { directory = "public" }

# Durable Objects bindings
[[durable_objects.bindings]]
name = "GAME_ROOM"
class_name = "GameRoom"

[[durable_objects.bindings]]
name = "ROOM_REGISTRY"
class_name = "RoomRegistry"

# Durable Objects migration (SQLite-backed for free plan)
[[migrations]]
tag = "v1"
new_sqlite_classes = ["GameRoom"]

[[migrations]]
tag = "v2"
new_sqlite_classes = ["RoomRegistry"]
